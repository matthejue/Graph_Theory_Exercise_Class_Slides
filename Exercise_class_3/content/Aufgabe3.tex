%!Tex Root = ../main.tex
% ./Packete.tex
% ./Design.tex
% ./Deklarationen.tex
% ./Vorbereitung.tex
% ./Aufgabe1.tex
% ./Aufgabe2.tex
% ./Aufgabe4.tex
% ./Appendix.tex

\section{Exercise 3}

\setcounter{exercise}{2}

\begin{frame}[allowframebreaks]{Aufgabe \thesection}{Control Flow Graphs}
  \begin{solution}
    \begin{columns}
      \begin{column}[t]{0.3\textwidth}
        \begin{linenums}
          \numberedcodebox[minted language=c, minted options={highlightlines={2-6}}]{./figures/program.c}
        \end{linenums}
      \end{column}
      \begin{column}[t]{0.3\textwidth}
        \begin{figure}
          \ctikzfig{3c}
          \caption{Control flow graph}
        \end{figure}
      \end{column}
      \begin{column}[t]{0.3\textwidth}
        \begin{figure}
          \ctikzfig{3a}
          \caption{Assignment of code lines to the CFG}
        \end{figure}
      \end{column}
    \end{columns}
  \end{solution}
  \begin{solutionnoinc}
    \begin{columns}
      \begin{column}[t]{0.3\textwidth}
        \begin{figure}
          \ctikzfig{3b}
          \caption{Control flow graph}
        \end{figure}
      \end{column}
      \begin{column}[t]{0.7\textwidth}
        \domtreecalc
      \end{column}
    \end{columns}
  \end{solutionnoinc}
  \begin{solutionnoinc}
    \begin{columns}
      \begin{column}[t]{0.5\textwidth}
        \domtreecalc
      \end{column}
      \begin{column}[t]{0.5\textwidth}
        \begin{table}
        \centering
        \begin{tblr}{
          cells = {white},
          row{1} = {SecondaryColor},
          cell{1}{2} = {fg=white},
          cell{1}{3} = {fg=white},
          cell{1}{4} = {fg=white},
          cell{1}{5} = {fg=white},
          cell{1}{6} = {fg=white},
          cell{2}{1} = {SecondaryColor,fg=white},
          cell{3}{1} = {SecondaryColor,fg=white},
          cell{4}{1} = {SecondaryColor,fg=white},
          cell{5}{1} = {SecondaryColor,fg=white},
          cell{6}{1} = {SecondaryColor,fg=white},
        }
            & $r$ & $a$ & $b$ & $c$ & $d$ \\
        $r$ &     &  1  &  1  &  1  &  1  \\
        $a$ &     &     &  1  &  1  &  1  \\
        $b$ &     &     &     &  1  &  1  \\
        $c$ &     &     &     &     &     \\
        $d$ &     &     &     &  1  &     
        \end{tblr}
        \end{table}
      \end{column}
    \end{columns}
  \end{solutionnoinc}
  \begin{solutionnoinc}
    \begin{columns}
      \begin{column}[t]{0.6\textwidth}
          \domtreecalc
      \end{column}
      \begin{column}[t]{0.4\textwidth}
        \begin{figure}
          \ctikzfig{3c}
          \caption{Dominance tree}
        \end{figure}
      \end{column}
    \end{columns}
  \end{solutionnoinc}

  \setcounter{exercise}{1}

  \begin{solutionnoinc}
    \begin{itemize}
      \item $v \operatorname{dom} w$ \alert{iff}
      \begin{itemize}
        \item \textcolor{SecondaryColor}{there exists a path from $r$ to $w$ in $G$} and
        \item every path in $G$ from $r$ to $w$ contains the node $v$
      \end{itemize}
      \item $v \operatorname{idom} w$ \alert{iff}
      \begin{itemize}
        \item $(v \operatorname{dom} w)$ and
        \item there's no node $u$ to which applies: $(v \operatorname{dom} u)$ and $(u \operatorname{dom} w)$
      \end{itemize}
    \end{itemize}
  \end{solutionnoinc}
\end{frame}
